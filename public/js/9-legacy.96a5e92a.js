"use strict";(self["webpackChunkbooking_client"]=self["webpackChunkbooking_client"]||[]).push([[9],{41009:function(e,t,o){o.r(t),o.d(t,{default:function(){return h}});var s=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("h3",[e._v("Warehouses")]),o("b-alert",{attrs:{variant:"success",show:""}},[e._v(" Create and modify warehouses ")]),o("b-row",[o("b-col",{attrs:{md:"2"}},[o("p",[e._v("Warehouse Name")]),o("b-form-input",{attrs:{type:"text"},model:{value:e.searchForm.name,callback:function(t){e.$set(e.searchForm,"name",t)},expression:"searchForm.name"}})],1),o("b-col",{attrs:{md:"2"}},[o("p",[e._v("Country")]),o("b-form-select",{model:{value:e.searchForm.country,callback:function(t){e.$set(e.searchForm,"country",t)},expression:"searchForm.country"}},[o("b-form-select-option",{attrs:{value:-1}},[e._v("All")]),e._l(e.countries,(function(t,s){return o("b-form-select-option",{key:s,attrs:{value:t._id}},[e._v(e._s(t.name))])}))],2)],1),o("b-col",{attrs:{md:"2"}},[o("b-button",{staticClass:"mt-4",attrs:{variant:"primary"},on:{click:e.fetch}},[e._v(" Search ")])],1),o("b-col",{staticClass:"text-right",attrs:{md:"6"}},[o("b-button",{staticClass:"mt-4",attrs:{variant:"success"},on:{click:e.add}},[o("b-icon",{attrs:{icon:"plus",scale:"1.5"}}),e._v(" Add ")],1)],1)],1),o("b-table",{staticClass:"mt-3",attrs:{fields:e.fields,items:e.list,busy:e.loading,outlined:"",responsive:""},scopedSlots:e._u([{key:"cell(index)",fn:function(t){return[o("p",[e._v(e._s((e.searchForm.page-1)*e.searchForm.perPage+t.index+1))])]}},{key:"cell(name)",fn:function(t){return[o("p",[e._v(e._s(t.value))])]}},{key:"cell(country)",fn:function(t){return[o("p",[e._v(e._s(t.item.country&&t.item.country.name))])]}},{key:"cell(edit)",fn:function(t){return[o("b-button",{staticClass:"mr-2",attrs:{variant:"success",size:"sm"},on:{click:function(o){return e.edit(t.index)}}},[o("b-icon",{attrs:{icon:"pencil"}}),e._v(" Edit ")],1),o("b-button",{staticClass:"mr-2",attrs:{variant:"success",size:"sm"},on:{click:function(o){return e.$router.push("/home/warehouse/"+t.item._id)}}},[o("b-icon",{attrs:{icon:"clock"}}),e._v(" Manage Slots ")],1),o("b-button",{staticClass:"mr-2",attrs:{variant:"danger",size:"sm"},on:{click:function(o){return e.deleteById(t.index)}}},[o("b-icon",{attrs:{icon:"trash"}}),e._v(" Delete ")],1)]}}])}),o("b-pagination",{attrs:{"total-rows":e.total,"per-page":e.searchForm.perPage,align:"right"},model:{value:e.searchForm.page,callback:function(t){e.$set(e.searchForm,"page",t)},expression:"searchForm.page"}}),o("b-modal",{attrs:{title:"Add Warehouse","hide-header-close":""},on:{ok:e.doAdd},model:{value:e.addModalShow,callback:function(t){e.addModalShow=t},expression:"addModalShow"}},[o("b-row",[o("b-col",{attrs:{md:"4"}},[e._v("Warehouse Name")]),o("b-col",{attrs:{md:"8"}},[o("b-form-input",{attrs:{type:"text",state:!!e.$v.warehouse.name.required&&null},model:{value:e.warehouse.name,callback:function(t){e.$set(e.warehouse,"name",t)},expression:"warehouse.name"}}),e.$v.warehouse.name.required?e._e():o("b-form-invalid-feedback",[e._v(" Name is required. ")])],1)],1),o("b-row",{staticClass:"mt-2"},[o("b-col",{attrs:{md:"4"}},[e._v("Country")]),o("b-col",{attrs:{md:"8"}},[o("b-form-select",{model:{value:e.warehouse.country,callback:function(t){e.$set(e.warehouse,"country",t)},expression:"warehouse.country"}},e._l(e.countries,(function(t,s){return o("b-form-select-option",{key:s,attrs:{value:t._id}},[e._v(e._s(t.name))])})),1)],1)],1)],1),o("b-modal",{attrs:{title:"Edit Warehouse","hide-header-close":""},on:{ok:e.doEdit},model:{value:e.editModalShow,callback:function(t){e.editModalShow=t},expression:"editModalShow"}},[o("b-row",[o("b-col",{attrs:{md:"4"}},[e._v("Warehouse Name")]),o("b-col",{attrs:{md:"8"}},[o("b-form-input",{attrs:{type:"text",state:!!e.$v.warehouse.name.required&&null},model:{value:e.warehouse.name,callback:function(t){e.$set(e.warehouse,"name",t)},expression:"warehouse.name"}}),e.$v.warehouse.name.required?e._e():o("b-form-invalid-feedback",[e._v(" Name is required. ")])],1)],1),o("b-row",{staticClass:"mt-2"},[o("b-col",{attrs:{md:"4"}},[e._v("Country")]),o("b-col",{attrs:{md:"8"}},[o("b-form-select",{model:{value:e.warehouse.country,callback:function(t){e.$set(e.warehouse,"country",t)},expression:"warehouse.country"}},e._l(e.countries,(function(t,s){return o("b-form-select-option",{key:s,attrs:{value:t._id}},[e._v(e._s(t.name))])})),1)],1)],1)],1),o("b-modal",{attrs:{title:"Delete Warehouse","hide-header-close":""},on:{ok:e.doDelete},model:{value:e.deleteModalShow,callback:function(t){e.deleteModalShow=t},expression:"deleteModalShow"}},[e._v(" Are you sure you want to delete? ")])],1)},a=[],r=o(93019),n=(o(68309),o(34665)),i=o(6409),c={name:"WarehouseView",mounted:function(){this.fetch()},data:function(){return{fields:[{key:"index",label:"No"},{key:"name",label:"Warehouse Name"},{key:"country",label:"Country"},{key:"edit",label:"-"}],loading:!1,searchForm:{page:1,perPage:10,name:"",country:-1},addModalShow:!1,editModalShow:!1,deleteModalShow:!1,warehouse:{_id:"",name:"",country:""}}},validations:{warehouse:{name:{required:i.C1}}},computed:(0,r.Z)({},(0,n.rn)({list:function(e){return e.warehouse.list},total:function(e){return e.warehouse.total},countries:function(e){return e.warehouse.countries}})),methods:{fetch:function(){var e=this;this.loading=!0,this.$store.dispatch("warehouse/fetch",this.searchForm).then((function(){e.loading=!1}))},add:function(){this.warehouse={_id:"",name:"",country:this.countries&&this.countries.length?this.countries[0]._id:""},this.addModalShow=!0},doAdd:function(e){var t=this;e.preventDefault(),this.$v.warehouse.$touch(),this.$v.warehouse.$error||(this.addModalShow=!1,this.$store.dispatch("warehouse/add",this.warehouse).then((function(){t.$toasted.success("Add Success"),t.fetch()})))},edit:function(e){this.warehouse={_id:this.list[e]._id,name:this.list[e].name,country:this.list[e].country?this.list[e].country._id:""},this.editModalShow=!0},doEdit:function(e){var t=this;e.preventDefault(),this.$v.warehouse.$touch(),this.$v.warehouse.$error||(this.editModalShow=!1,this.$store.dispatch("warehouse/edit",this.warehouse).then((function(){t.$toasted.success("Edit Success"),t.fetch()})))},deleteById:function(e){this.warehouse._id=this.list[e]._id,this.deleteModalShow=!0},doDelete:function(){var e=this;this.$store.dispatch("warehouse/deleteById",this.warehouse._id).then((function(){e.$toasted.success("Delete Success"),e.fetch()}))}},watch:{"searchForm.page":function(){this.fetch()}}},u=c,l=o(1001),d=(0,l.Z)(u,s,a,!1,null,null,null),h=d.exports}}]);
//# sourceMappingURL=9-legacy.96a5e92a.js.map