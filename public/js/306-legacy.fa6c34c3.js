"use strict";(self["webpackChunkbooking_client"]=self["webpackChunkbooking_client"]||[]).push([[306],{33306:function(t,e,o){o.r(e),o.d(e,{default:function(){return h}});var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("h3",[t._v("Countries")]),o("b-alert",{attrs:{variant:"success",show:""}},[t._v(" Create and modify countries ")]),o("b-row",[o("b-col",{attrs:{md:"2"}},[o("b-form-input",{attrs:{type:"text",placeholder:"Country Name"},model:{value:t.searchForm.name,callback:function(e){t.$set(t.searchForm,"name",e)},expression:"searchForm.name"}})],1),o("b-col",{attrs:{md:"2"}},[o("b-button",{attrs:{variant:"primary"},on:{click:t.fetch}},[t._v(" Search ")])],1),o("b-col",{staticClass:"text-right",attrs:{md:"8"}},[o("b-button",{attrs:{variant:"success"},on:{click:t.add}},[o("b-icon",{attrs:{icon:"plus",scale:"1.5"}}),t._v(" Add ")],1)],1)],1),o("b-table",{staticClass:"mt-3",attrs:{fields:t.fields,items:t.list,busy:t.loading,outlined:"",responsive:""},scopedSlots:t._u([{key:"cell(index)",fn:function(e){return[o("p",[t._v(t._s((t.searchForm.page-1)*t.searchForm.perPage+e.index+1))])]}},{key:"cell(name)",fn:function(e){return[o("p",[t._v(t._s(e.value))])]}},{key:"cell(edit)",fn:function(e){return[o("b-button",{staticClass:"mr-2",attrs:{variant:"success",size:"sm"},on:{click:function(o){return t.edit(e.index)}}},[o("b-icon",{attrs:{icon:"pencil"}}),t._v(" Edit ")],1),o("b-button",{attrs:{variant:"danger",size:"sm"},on:{click:function(o){return t.deleteById(e.index)}}},[o("b-icon",{attrs:{icon:"trash"}}),t._v(" Delete ")],1)]}}])}),o("b-pagination",{attrs:{"total-rows":t.total,"per-page":t.searchForm.perPage,align:"right"},model:{value:t.searchForm.page,callback:function(e){t.$set(t.searchForm,"page",e)},expression:"searchForm.page"}}),o("b-modal",{attrs:{title:"Add Country","hide-header-close":""},on:{ok:t.doAdd,cancel:function(e){t.addModalShow=!1}},model:{value:t.addModalShow,callback:function(e){t.addModalShow=e},expression:"addModalShow"}},[o("b-row",[o("b-col",{attrs:{md:"4"}},[t._v("Country Name")]),o("b-col",{attrs:{md:"8"}},[o("b-form-input",{attrs:{type:"text",state:!!t.$v.country.name.required&&null},model:{value:t.country.name,callback:function(e){t.$set(t.country,"name",e)},expression:"country.name"}}),t.$v.country.name.required?t._e():o("b-form-invalid-feedback",[t._v(" Name is required. ")])],1)],1)],1),o("b-modal",{attrs:{title:"Edit Country","hide-header-close":""},on:{ok:t.doEdit},model:{value:t.editModalShow,callback:function(e){t.editModalShow=e},expression:"editModalShow"}},[o("b-row",[o("b-col",{attrs:{md:"4"}},[t._v("Country Name")]),o("b-col",{attrs:{md:"8"}},[o("b-form-input",{attrs:{type:"text",state:!!t.$v.country.name.required&&null},model:{value:t.country.name,callback:function(e){t.$set(t.country,"name",e)},expression:"country.name"}}),t.$v.country.name.required?t._e():o("b-form-invalid-feedback",[t._v(" Name is required. ")])],1)],1)],1),o("b-modal",{attrs:{title:"Delete Country","hide-header-close":""},on:{ok:t.doDelete},model:{value:t.deleteModalShow,callback:function(e){t.deleteModalShow=e},expression:"deleteModalShow"}},[t._v(" Are you sure you want to delete? ")])],1)},a=[],r=o(93019),i=(o(41539),o(54747),o(47941),o(34665)),s=o(6409),c={name:"CountryView",mounted:function(){this.fetch()},data:function(){return{fields:[{key:"index",label:"No"},{key:"name",label:"Country Name"},{key:"edit",label:"-"}],loading:!1,searchForm:{page:1,perPage:10,name:""},addModalShow:!1,editModalShow:!1,deleteModalShow:!1,country:{_id:"",name:""}}},validations:{country:{name:{required:s.C1}}},computed:(0,r.Z)({},(0,i.rn)({list:function(t){return t.country.list},total:function(t){return t.country.total}})),methods:{fetch:function(){var t=this;this.loading=!0,this.$store.dispatch("country/fetch",this.searchForm).then((function(){t.loading=!1}))},add:function(){this.country={_id:"",name:""},this.addModalShow=!0},doAdd:function(t){var e=this;t.preventDefault(),this.$v.country.$touch(),this.$v.country.$error||(this.addModalShow=!1,this.$store.dispatch("country/add",this.country).then((function(){e.$toasted.success("Add Success"),e.fetch()})))},edit:function(t){var e=this;Object.keys(this.list[t]).forEach((function(o){e.country[o]=e.list[t][o]})),this.editModalShow=!0},doEdit:function(t){var e=this;t.preventDefault(),this.$v.country.$touch(),this.$v.country.$error||(this.editModalShow=!1,this.$store.dispatch("country/edit",this.country).then((function(){e.$toasted.success("Edit Success"),e.fetch()})))},deleteById:function(t){this.country._id=this.list[t]._id,this.deleteModalShow=!0},doDelete:function(){var t=this;this.$store.dispatch("country/deleteById",this.country._id).then((function(){t.$toasted.success("Delete Success"),t.fetch()}))}},watch:{"searchForm.page":function(){this.fetch()}}},d=c,l=o(1001),u=(0,l.Z)(d,n,a,!1,null,null,null),h=u.exports}}]);
//# sourceMappingURL=306-legacy.fa6c34c3.js.map